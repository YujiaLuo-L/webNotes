<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maxinum-scale=1,mininum-scale=1,user-scalable=no"/>
    <title>RANDOM PHOTO</title>
    <style></style>
  </head>
  <body>
    <div id="img_container">
        <img id="random-img" src=""/>
    </div>
  </body>
  ​<script type="text/javascript">
    function dosomething(jsondata){
        //处理获得的json数据
    }
</script>
<script src="http://example.com/data.php?callback=dosomething"></script>
    <!-- <script>
    //    const url='https://wallhaven.cc/random'
      
    // const  xmlHttp=new XMLHttpRequest();
    // xmlHttp.open('GET',url,true);
    // // xmlHttp.setRequestHeader('remote_addr',"http://172.67.69.188:443")
    // xmlHttp.send(null)
    // const result=xmlHttp.responseText;
    // console.log('result',result);
      //  var script=document.createElement('script');
      //  script.type="text/javascript";
      //  script.src='https://wallhaven.cc/random?seed=RqNIDM&page=2&callback=back'
      //  document.head.appendChild(script);
      //  function back(data){
      //   console.log(data);
      //  }
// index.html
function jsonp({ url, params, callback }) {
  return new Promise((resolve, reject) => {
    let script = document.createElement('script')
    window[callback] = function(data) {
      resolve(data)
      document.body.removeChild(script)
    }
    params = { ...params, callback } // wd=b&callback=show
    let arrs = []
    for (let key in params) {
      arrs.push(`${key}=${params[key]}`)
    }
    script.src = `${url}?${arrs.join('&')}`
    document.body.appendChild(script)
  })
}
jsonp({
  url: 'https://wallhaven.cc/random',
  params: { seed: 'RqNIDM' ,page:2},
  callback: 'show'
}).then(data => {
  console.log(data)
})
    </script> -->
  </body>
</html>
